branches:
  only:
    - master
#env:
#  secure: "FIXME"
language: scala
scala:
  - 2.10.6
jdk:
  - openjdk7
sudo: false
cache:
  directories:
    - ~/.ivy2
    - ~/kafka_2.11-0.9.0.0
  apt: true
before_install:
  - cd ~
  - test -d kafka_2.11-0.9.0.0/bin || curl -s http://mirrors.ibiblio.org/apache/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz | tar xvz
  - cd $TRAVIS_BUILD_DIR
  - cp .travisci/credentials.sbt ~/.sbt
  - sed -i "s|%{password}|$ARTIFACTORY_PASS|" ~/.sbt/credentials.sbt
before_script:
  - cd ~/kafka_2.11-0.9.0.0
  - ./bin/zookeeper-server-start.sh config/zookeeper.properties & sleep 3
  - ./bin/kafka-server/start.sh     config/server.properties    & sleep 5
  - cd $TRAVIS_BUILD_DIR
sbt_args: -Dsbt.log.noformat=true -sbt-dir ~/.sbt
